# 图片字幕生成器 - 产品需求文档 (PRD)

## 1. 项目概述

### 1.1. 项目目标

开发一个在线网页工具，允许用户上传图片，并为图片添加多行水平字幕。工具需提供灵活的字幕样式配置，并能生成和下载带字幕的图片。

### 1.2. 核心功能

- 图片上传
- 多行字幕文本输入
- 字幕样式自定义（字幕区域高度、字体大小、字体颜色、轮廓颜色）
- 实时预览生成的字幕图片
- 下载生成的图片

## 2. 功能需求

### 2.1. 图片上传

- **用户操作**：用户点击“选择文件”按钮。
- **系统响应**：
    - 弹出系统文件选择对话框。
    - 用户选择一张图片文件（如 .png, .jpg, .jpeg, .gif, .bmp）。
    - 图片上传后，文件名显示在按钮旁边。
    - 上传的图片显示在页面下方的预览区域。

### 2.2. 字幕内容与样式配置

#### 2.2.1. 字幕文本输入

- **用户界面**：提供一个多行文本输入框（`<textarea>`）。
- **用户操作**：用户在文本框中输入字幕内容。
- **系统逻辑**：
    - 每一行文本对应图片底部的一行字幕。
    - 文本内容应实时更新，用于生成预览。

#### 2.2.2. 样式配置

提供以下输入控件用于配置字幕样式：

1.  **字幕高度 (px)**:
    - **控件**：数字输入框。
    - **功能**：定义每一行字幕背景条的高度（单位：像素）。
    - **默认值**：40

2.  **字体大小 (px)**:
    - **控件**：数字输入框。
    - **功能**：定义字幕文字的大小（单位：像素）。
    - **默认值**：20

3.  **字体颜色**:
    - **控件**：颜色选择器。
    - **功能**：定义字幕文字的颜色。
    - **默认值**：`#FFFFFF` (白色)

4.  **轮廓颜色**:
    - **控件**：颜色选择器。
    - **功能**：定义字幕文字轮廓的颜色（用于增强对比度）。
    - **默认值**：`#000000` (黑色)

### 2.3. 生成与预览

- **用户操作**：用户点击“生成字幕图片”按钮。
- **系统响应**：
    - 系统根据用户输入的字幕文本和配置的样式，在预览区域的图片上叠加字幕。
    - **视觉风格**：
        - 字幕位于图片底部。
        - 每一行字幕都有一个独立的、横跨整个图片宽度的背景条。
        - 所有字幕行的背景条颜色和样式应保持一致，形成一种“切割感”的视觉效果。
        - 字幕文字（包括其轮廓）水平居中显示在各自的背景条内。
    - 预览应实时或准实时更新，以便用户调整。

### 2.4. 保存图片

- **用户操作**：用户点击“保存图片”按钮。
- **系统响应**：
    - 将当前预览区域中已添加字幕的图片合成为一张新的图片。
    - 触发浏览器下载功能，允许用户将生成的图片保存到本地。
    - 文件名可以默认为 `[原始文件名]_subtitled.png`。

## 3. 非功能性需求

### 3.1. 用户界面 (UI)

- 界面布局简洁、直观，与参考图片类似。
- 控件分组清晰，易于理解和操作。

### 3.2. 性能

- 图片处理（生成预览、最终合成）应在客户端（浏览器）完成，以减少服务器负载和提高响应速度。
- 对大尺寸图片的处理应有合理的性能表现，避免浏览器卡顿或崩溃。

### 3.3. 兼容性

- 工具应在主流现代浏览器（Chrome, Firefox, Safari, Edge）的最新版本上正常工作。

## 4. 范围外

- 用户账户系统与云端存储。
- 复杂的字幕动画效果。
- 自动语音识别生成字幕。
- 图片右下角的水印功能（如“公众号·南瓜博士”）暂不作为核心需求，可作为未来迭代功能。